(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-564a9af4"],{"09dd":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o})),e.d(i,"d",(function(){return c}));var a=e("b775");e("5f87");function n(t){return Object(a["a"])({url:"/sign/all",method:"get",params:{type:t}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"android/apple",page:1,pageSize:20};return Object(a["a"])({url:"/sign/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/sign/delete",method:"post",data:{uuid:t}})}function c(t){return Object(a["a"])({url:"/sign/upload",method:"post",data:t})}},"1a4a":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"body"},[e("input",{ref:"upload-input",staticClass:"upload",attrs:{type:"file"},on:{change:t.handleClick}}),e("input",{ref:"upload-icon",staticClass:"upload",attrs:{type:"file",accept:"image/*"},on:{change:t.handleIcon}}),e("div",{class:"inputarea "+(3===this.block?"selectcontainer":"container"),on:{click:function(i){return t.select(3)}}},[e("b",{class:3===this.block?"selecttitle":"title"},[t._v("SignInfo")]),e("div",{staticClass:"inputline"},[e("div",{staticClass:"inputHint"},[t._v("选择签名")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.params.signUUID,expression:"params.signUUID"}],staticClass:"input",attrs:{disabled:t.signList.length<=1||t.isSubmit},on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var i="_value"in t?t._value:t.value;return i}));t.$set(t.params,"signUUID",i.target.multiple?e:e[0])}}},t._l(t.signList,(function(i){return e("option",{domProps:{value:i.uuid}},[t._v(" "+t._s(i.remark)+" ")])})),0)])]),e("div",{class:"inputarea "+(0===this.block?"selectcontainer":"container"),on:{click:function(i){return t.select(0)}}},[e("b",{class:0===this.block?"selecttitle":"title"},[t._v("AppInfo")]),e("div",{staticClass:"inputline"},[e("div",{staticClass:"inputHint"},[t._v("applicationName")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationName,expression:"applicationName"}],staticClass:"input",attrs:{disabled:t.isSubmit},domProps:{value:t.applicationName},on:{input:function(i){i.target.composing||(t.applicationName=i.target.value)}}})]),e("div",{staticClass:"inputline"},[e("div",{staticClass:"inputHint"},[t._v("applicationId")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.applicationId,expression:"applicationId"}],staticClass:"input",attrs:{disabled:t.isSubmit},domProps:{value:t.applicationId},on:{input:function(i){i.target.composing||(t.applicationId=i.target.value)}}})]),t._l(Object.keys(t.params.metaData),(function(i){return e("div",{staticClass:"inputline"},[e("div",{staticClass:"inputHint"},[t._v(t._s(i))]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.params.metaData[i],expression:"params.metaData[row]"}],staticClass:"input",attrs:{disabled:t.isSubmit},domProps:{value:t.params.metaData[i]},on:{input:function(e){e.target.composing||t.$set(t.params.metaData,i,e.target.value)}}})])}))],2),e("div",{class:1===this.block?"selectcontainer":"container",on:{click:function(i){return t.select(1)}}},[e("b",{class:1===this.block?"selecttitle":"title"},[t._v("AppIcon")]),e("div",{staticClass:"line"},[e("div",{class:1===this.block&&0===this.position?"select":"disselect",on:{click:function(i){return t.selectIcon()}}},[this.icon.src?e("img",{staticClass:"image",attrs:{src:this.icon.src}}):e("div",{staticClass:"box"},[t._v("144x144px")]),t.isSubmit?e("p",{class:1===this.block&&0===this.position?"selectlabel":"disselectlabel",style:1===this.block&&0===this.position?"color:white":"color:#0849d9"},[t._v("上传"+t._s(this.icon.progress)+"%")]):e("p",{class:1===this.block&&0===this.position?"selectlabel":"disselectlabel"},[t._v(" ic_launcher")])])]),e("p",{staticClass:"label"},[t._v("drawable-xxhdpi")])]),e("div",{class:(2===this.block?"selectcontainer":"container")+" filebox",on:{click:function(i){return t.select(2)}}},[e("b",{class:2===this.block?"selecttitle":"title"},[t._v("AppFile")]),t.isSubmit?t._e():e("div",{staticClass:"line"},[e("button",{staticClass:"button",on:{click:t.handleUpload}},[t._v("添加")])]),t.isSubmit?t._e():e("p",{staticClass:"label"},[t._v("file-replace")]),e("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":"请添加需要替换的文件",data:t.fileList,border:"",fit:"","highlight-current-row":""}},[e("el-table-column",{attrs:{label:"本地文件"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row;return[e("span",{staticClass:"single-line no-select"},[t._v(t._s(a.name))])]}}])}),e("el-table-column",{attrs:{label:"资源文件"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row;return[a.edit?e("input",{directives:[{name:"model",rawName:"v-model",value:a.uri,expression:"row.uri"}],staticClass:"input max-input",attrs:{disabled:t.isSubmit},domProps:{value:a.uri},on:{keyup:function(i){return!i.type.indexOf("key")&&t._k(i.keyCode,"enter",13,i.key,"Enter")?null:t.confirmEdit(a)},input:function(i){i.target.composing||t.$set(a,"uri",i.target.value)}}}):e("span",{staticClass:"single-line no-select",on:{dblclick:function(t){a.edit=!a.edit}}},[t._v(t._s(a.uri))])]}}])}),t.isSubmit?e("el-table-column",{attrs:{label:"上传",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row;return[e("span",{staticStyle:{color:"#0849d9"}},[t._v(t._s(a.progress)+"%")])]}}])}):e("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(i){var a=i.row;return[a.edit?e("button",{staticClass:"button mini",on:{click:function(i){return t.confirmEdit(a)}}},[t._v("确定")]):e("button",{staticClass:"button mini",on:{click:function(t){a.edit=!a.edit}}},[t._v("编辑")]),a.edit?e("button",{staticClass:"button mini",on:{click:function(i){return t.cancelEdit(a)}}},[t._v("取消")]):e("button",{staticClass:"button mini",on:{click:function(i){return t.handleDelete(a,t.$index)}}},[t._v("删除")])]}}],null,!1,3578609655)})],1)],1),e("br"),e("button",{staticStyle:{"margin-top":"20px","margin-bottom":"50px",padding:"6px 60px 6px 60px"},attrs:{type:"info",size:"large"},on:{click:t.submit}},[t._v("提交 ")]),e("br")])},n=[],s=(e("b0c0"),e("d81d"),e("b64b"),e("a434"),e("09dd")),o=e("5f87"),c=e("3f5e"),l=e("5ee1"),r=e("b562"),u={name:"CreateApk",data:function(){return{applicationName:void 0,applicationId:void 0,fileList:[],signList:[{uuid:void 0,remark:"不签名"}],block:-1,position:0,icon:{file:void 0,src:void 0,progress:0,url:void 0},isSubmit:!1,params:{originUUID:void 0,applicationName:void 0,applicationId:void 0,icon:void 0,metaData:{},fileData:{},signUUID:void 0}}},created:function(){var t=this;document.onkeydown=function(i){if(1===t.block&&0===t.position){var e=i.code.toUpperCase();"DELETE"!==e&&"BACKSPACE"!==e||t.resetIcon()}},this.params.originUUID=this.$route.query.uuid,Object(s["b"])(this.$route.name).then((function(i){return t.signList.push.apply(t.signList,i.data.list)})),this.fetchData()},destroyed:function(){document.onkeydown=void 0},methods:{resetIcon:function(){this.icon.file=void 0,this.icon.src=void 0,this.icon.progress=0,this.icon.url=void 0,this.icon.src=this.icon.originSrc},fetchData:function(){var t=this;Object(r["b"])(this.params.originUUID).then((function(i){var e=i.data;t.params.metaData=e.metaData||{},t.params.applicationName=e.appName,t.params.applicationId=e.packageName,t.applicationName=e.appName,t.applicationId=e.packageName,t.icon.src=e.icon+"?token="+Object(o["a"])(),t.icon.originSrc=t.icon.src}))},submit:function(){var t=this;if(!this.isSubmit){this.isSubmit=!0,this.fileList.map((function(t){t.edit=!1,t.originalUri=t.uri})),this.params.applicationName=this.applicationName,this.params.applicationId=this.applicationId;var i=function(){t.icon.file&&!t.icon.url||Object.keys(t.params.fileData).length===t.fileList.length&&Object(l["a"])(t.params).then((function(){t.$message({message:"创建成功",type:"success"})})).catch((function(t){}))};this.icon.file&&Object(c["a"])(this.icon.file,(function(i){t.icon.progress=i})).then((function(e){var a=e.data.data;t.icon.url=a,t.params.icon=a,i()})),this.fileList.length&&this.fileList.map((function(e){Object(c["a"])(e.file,(function(t){e.progress=t})).then((function(a){var n=a.data.data;e.url=n,t.params.fileData[e.uri.replaceAll(".","@@")]=n,i()}))})),i(),console.log({applicationName:this.applicationName,applicationId:this.applicationId,fileList:this.fileList,block:this.block,position:this.position,icon:this.icon})}},selectIcon:function(){this.isSubmit||(this.select(1,0),this.$refs["upload-icon"].click())},handleIcon:function(t){var i=this;if(t&&FileReader){var e=t.target.files,a=e[0];if(a){this.icon.file=a;var n=new FileReader;n.onload=function(t){return i.icon.src=t.target.result},n.readAsDataURL(a)}}},select:function(t,i){this.block=t,this.position=null!==i&&void 0!==i?i:this.position},cancelEdit:function(t){t.uri=t.originalUri,t.edit=!1,this.$message({message:"已恢复为原始值",type:"warning"})},confirmEdit:function(t){t.edit=!1,t.originalUri=t.uri,this.$message({message:"修改完成",type:"success"})},handleDelete:function(t,i){this.fileList.splice(i,1),this.$message({message:"删除成功",type:"success"})},handleUpload:function(){this.isSubmit||this.$refs["upload-input"].click()},handleClick:function(t){var i=t.target.files,e=i[0];e&&this.fileList.push({file:e,name:e.name,size:e.size,uri:"/assets/"+e.name,originalUri:"/assets/"+e.name,edit:!1,progress:0})}}},p=u,d=(e("6f1d"),e("2877")),f=Object(d["a"])(p,a,n,!1,null,"3e1ceec8",null);i["default"]=f.exports},2493:function(t,i,e){},"3f5e":function(t,i,e){"use strict";e.d(i,"a",(function(){return o}));var a=e("bc3a"),n=e.n(a),s=e("5f87");function o(t,i){var e=new FormData;return e.append("file",t),n.a.post("http://bintry.cn:12003/file/upload",e,{headers:{"Content-Type":"multipart/form-data","x-access-token":Object(s["a"])()},onUploadProgress:function(t){if(t.lengthComputable){var e=t.loaded/t.total*100|0;e=e>100?100:e,i&&i(e,t.loaded,t.total)}}})}},"5ee1":function(t,i,e){"use strict";e.d(i,"c",(function(){return n})),e.d(i,"b",(function(){return s})),e.d(i,"a",(function(){return o}));var a=e("b775");e("5f87");function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"android/apple",page:1,pageSize:20};return Object(a["a"])({url:"/batch/list",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/batch/delete",method:"post",data:{uuid:t}})}function o(t){return Object(a["a"])({url:"/batch/create",method:"post",data:t})}},"6f1d":function(t,i,e){"use strict";e("2493")},a434:function(t,i,e){"use strict";var a=e("23e7"),n=e("23cb"),s=e("a691"),o=e("50c4"),c=e("7b0b"),l=e("65f0"),r=e("8418"),u=e("1dde"),p=e("ae40"),d=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,i){var e,a,u,p,d,f,g=c(this),k=o(g.length),_=n(t,k),C=arguments.length;if(0===C?e=a=0:1===C?(e=0,a=k-_):(e=C-2,a=h(m(s(i),0),k-_)),k+e-a>b)throw TypeError(v);for(u=l(g,a),p=0;p<a;p++)d=_+p,d in g&&r(u,p,g[d]);if(u.length=a,e<a){for(p=_;p<k-a;p++)d=p+a,f=p+e,d in g?g[f]=g[d]:delete g[f];for(p=k;p>k-a+e;p--)delete g[p-1]}else if(e>a)for(p=k-a;p>_;p--)d=p+a-1,f=p+e-1,d in g?g[f]=g[d]:delete g[f];for(p=0;p<e;p++)g[p+_]=arguments[p+2];return g.length=k-a+e,u}})},b562:function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return o})),e.d(i,"d",(function(){return c}));var a=e("b775");e("5f87");function n(t){return Object(a["a"])({url:"/app/info",method:"get",params:{uuid:t}})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"android/apple",page:1,pageSize:20};return Object(a["a"])({url:"/app/list",method:"get",params:t})}function o(t){return Object(a["a"])({url:"/app/delete",method:"post",data:{uuid:t}})}function c(t){return Object(a["a"])({url:"/app/upload",method:"post",data:{url:t}})}}}]);